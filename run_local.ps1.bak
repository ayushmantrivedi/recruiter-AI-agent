# Recruiter AI Platform - Local Demo Run Script (Windows)

Write-Host "ğŸš€ Starting Recruiter AI Platform Local Demo..." -ForegroundColor Cyan

# 1. Initialize Backend
Write-Host "`nğŸ“¦ Setting up Backend..." -ForegroundColor Yellow
if (-not (Test-Path ".env")) {
    Write-Host "âš ï¸ .env not found. Creating from env.example..." -ForegroundColor Gray
    Copy-Item "env.example" ".env"
}

# Ensure SQLite DB exists
if (-not (Test-Path "recruiter_ai.db")) {
    Write-Host "ğŸ“‚ Initializing SQLite database..." -ForegroundColor Gray
    python -c "from app.database import create_tables; create_tables()"
}

# Start Backend in a new window
Write-Host "âš¡ Starting Backend API on http://localhost:8000" -ForegroundColor Green
Start-Process powershell -ArgumentList "-NoExit", "-Command", "python -m uvicorn app.main:app --host 0.0.0.0 --port 8000" -WindowStyle Normal

# 2. Initialize Frontend
Write-Host "`nğŸ¨ Setting up Frontend..." -ForegroundColor Yellow
Set-Location "frontend"

if (-not (Test-Path "node_modules")) {
    Write-Host "ğŸ“¥ Installing frontend dependencies (npm install)..." -ForegroundColor Gray
    npm install
}

if (-not (Test-Path ".env.local")) {
    Write-Host "âš ï¸ .env.local not found. Creating..." -ForegroundColor Gray
    "VITE_API_URL=http://localhost:8000" | Out-File -FilePath ".env.local" -Encoding utf8
}

# Start Frontend in a new window
Write-Host "ğŸŒ Starting Frontend UI on http://localhost:3000" -ForegroundColor Green
Start-Process powershell -ArgumentList "-NoExit", "-Command", "npm run dev" -WindowStyle Normal

Write-Host "`nâœ… Local Demo Environment is launching!" -ForegroundColor Cyan
Write-Host "ğŸ‘‰ Backend: http://localhost:8000/docs"
Write-Host "ğŸ‘‰ Frontend: http://localhost:3000"
Write-Host "`nPlease keep both terminal windows open." -ForegroundColor Gray
